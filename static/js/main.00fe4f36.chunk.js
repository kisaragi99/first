(this.webpackJsonpfirst_project=this.webpackJsonpfirst_project||[]).push([[1],{145:function(e,t,n){},146:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(45),i=n.n(o);n(145),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(25),u=n(26),s=n(28),l=n(27),f=(n(146),n(56)),d=n.n(f),p=n(47),m=n.n(p),g=n(16),b=function(e){return a.a.createElement("div",{className:m.a.item},a.a.createElement(g.b,{to:e.addres,className:m.a.link,activeClassName:m.a.active},e.title))},v=function(){return a.a.createElement("nav",{className:d.a.nav},a.a.createElement("div",{className:d.a.itemWrapper},a.a.createElement(b,{title:"Profile",addres:"/profile"}),a.a.createElement(b,{title:"Friends",addres:"/friends"}),a.a.createElement(b,{title:"News",addres:"/news"}),a.a.createElement(b,{title:"Messages",addres:"/dialogs"}),a.a.createElement(b,{title:"Settings",addres:"/settings"})))},h=n(5),E=n(19),w=n(37),O=n(48),j=n.n(O),_=function(){var e=function(){var e=Object(r.useState)([]),t=Object(w.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(""),c=Object(w.a)(i,2),u=c[0],s=c[1],l=Object(r.useState)(0),f=Object(w.a)(l,2),d=f[0],p=f[1],m=function(e){o(n.filter((function(t){return t.id!=e._dispatchInstances.key})))},g=n.map((function(e,t){return a.a.createElement("div",{key:e.id,onClick:m},e.text)}));return a.a.createElement("form",{onSubmit:function(e){o((function(e){return[].concat(Object(E.a)(e),[{text:u,id:d}])})),e.preventDefault(),p(d+1),e.target.reset(),s("")}},a.a.createElement("input",{onChange:function(e){s(u=e.currentTarget.value)}}),a.a.createElement("button",{className:"submit"},"Submit"),a.a.createElement("div",null,g))},t=function(){var e=Object(r.useState)(0),t=Object(w.a)(e,2),n=t[0],o=t[1];return a.a.createElement("div",{className:j.a.wrapper},a.a.createElement("button",{className:j.a.plusButton,onClick:function(){o(n+1)}},"+"),n,a.a.createElement("button",{className:j.a.minusButton,onClick:function(){o(n-1)},disabled:0===n},"-"))};return a.a.createElement(a.a.Fragment,null,a.a.createElement(e,null),a.a.createElement(t,null))},P=n(84),y=n.n(P),I=function(e){return a.a.createElement("div",{className:y.a.wrapper},"Settings or maybe not")},S=n(59),C=n.n(S),A=function(e){return a.a.createElement("header",{className:C.a.header},a.a.createElement("img",{src:"https://jlptsensei.com/wp-content/uploads/2015/02/JLPT-logo-600x298.jpg",alt:"logo1"}),a.a.createElement("div",{className:C.a.loginBlock},e.isAuth?a.a.createElement("div",null,a.a.createElement(g.b,{to:"/profile/".concat(12530)},e.login),a.a.createElement("button",{onClick:e.logout},"Logout")):"Need Auth"))},x=n(20),k=n(29),N=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(A,this.props))}}]),n}(a.a.Component),F=Object(x.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:k.d})(N),L=n(4),T=n.n(L),D=n(7),z=n(2),U=n(8),B=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(z.a)(Object(z.a)({},e),r):e}))},R="FOLLOW",M="UNFOLLOW",G="SET_FRIENDS",W="SET_CURRENT_PAGE",q="SET_TOTAL_FRIENDS_COUNT",K="TOGGLE_IS_LOADING",H="TOGGLE_IS_FOLLOWING_PROCESS",J={friends:[],pageSize:9,totalFriendsCount:0,currentPage:1,isLoading:!0,followingInProcess:[]},V=function(e){return{type:R,friendId:e}},Z=function(e){return{type:M,friendId:e}},X=function(e){return{type:K,isLoading:e}},Y=function(e,t){return{type:H,isLoading:e,friendId:t}},Q=function(){var e=Object(D.a)(T.a.mark((function e(t,n,r,a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Y(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(a(n)),t(Y(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(z.a)(Object(z.a)({},e),{},{friends:B(e.friends,t.friendId,"id",{followed:!0})});case M:return Object(z.a)(Object(z.a)({},e),{},{friends:B(e.friends,t.friendId,"id",{followed:!1})});case G:return Object(z.a)(Object(z.a)({},e),{},{friends:t.friends});case W:return Object(z.a)(Object(z.a)({},e),{},{currentPage:t.currentPage});case q:return Object(z.a)(Object(z.a)({},e),{},{totalFriendsCount:t.totalCount});case K:return Object(z.a)(Object(z.a)({},e),{},{isLoading:t.isLoading});case H:return Object(z.a)(Object(z.a)({},e),{},{followingInProcess:t.isLoading?[].concat(Object(E.a)(e.followingInProcess),[t.friendId]):[e.followingInProcess.filter((function(e){return e!==t.friendId}))]});default:return e}},ee=n(92),te=n(36),ne=n.n(te),re=n.p+"static/media/avatar.a502917b.png",ae=n(87),oe=n.n(ae),ie=function(e){for(var t=e.totalFriendsCount,n=e.pageSize,r=e.currentPage,o=e.onPageChanged,i=Math.ceil(t/n),c=[],u=1;u<=i;u++)c.push(u);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null," ",c.map((function(e,t){return a.a.createElement("span",{className:r===e&&oe.a.selectedPage,onClick:function(t){o(e)},key:t},"".concat(e," "))}))))},ce=function(e){var t=e.friend,n=e.followingInProcess,r=e.follow,o=e.unfollow;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:ne.a.friendsBox,key:t.id},a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(g.b,{to:"/profile/"+t.id},a.a.createElement("img",{src:null!=t.photos.small?t.photos.small:re,className:ne.a.friendsAvatar,alt:"avatar"}))),a.a.createElement("div",null," ",t.followed?a.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){o(t.id)}}," Unfollow "):a.a.createElement("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)}},"Follow"))),a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",null,t.name),a.a.createElement("div",null,t.status)),a.a.createElement("div",null,a.a.createElement("div",null,"Some Country"),a.a.createElement("div",null,"Some City")))))},ue=function(e){var t=e.totalFriendsCount,n=e.pageSize,r=e.friends,o=e.followingInProcess,i=e.follow,c=e.unfollow,u=e.currentPage,s=e.onPageChanged;Object(ee.a)(e,["totalFriendsCount","pageSize","friends","followingInProcess","follow","unfollow","currentPage","onPageChanged"]);return a.a.createElement("div",null,r.map((function(e){return a.a.createElement(ce,{key:e.id,className:ne.a.friendsBox,followingInProcess:o,follow:i,unfollow:c,friend:e})})),a.a.createElement(ie,{currentPage:u,totalFriendsCount:t,pageSize:n,onPageChanged:s}))},se=n(34),le=n(14),fe=n(89),de=Object(fe.a)((function(e){return console.log("selector did something"),e.friendsPage.friends}),(function(e){return console.log("SuperSelector did something"),e.filter((function(e){return!0}))})),pe=function(e){return e.friendsPage.totalFriendsCount},me=function(e){return e.friendsPage.pageSize},ge=function(e){return e.friendsPage.currentPage},be=function(e){return e.friendsPage.isLoading},ve=function(e){return e.friendsPage.followingInProcess},he=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){var n=e.props;(0,n.getUsers)(t,n.pageSize)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.getUsers)(e.currentPage,e.pageSize)}},{key:"render",value:function(){return console.log("Friends rendered"),a.a.createElement(a.a.Fragment,null,this.props.isLoading?a.a.createElement(se.a,null):null,a.a.createElement(ue,{friends:this.props.friends,follow:this.props.follow,unfollow:this.props.unfollow,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,totalFriendsCount:this.props.totalFriendsCount,pageSize:this.props.pageSize,followingInProcess:this.props.followingInProcess}))}}]),n}(a.a.Component),Ee=Object(le.d)(Object(x.b)((function(e){return{friends:de(e),pageSize:me(e),totalFriendsCount:pe(e),currentPage:ge(e),isLoading:be(e),followingInProcess:ve(e)}}),{follow:function(e){return function(){var t=Object(D.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(n,e,U.c.followUserAPI.bind(U.c),V);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(D.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(n,e,U.c.unfollowUserAPI.bind(U.c),Z);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},toggleFollowingProcess:Y,getUsers:function(e,t){return function(){var n=Object(D.a)(T.a.mark((function n(r){var a;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(X(!0)),n.next=3,U.c.getUsersAPI(e,t);case 3:a=n.sent,r(X(!1)),r((i=a.items,{type:G,friends:i})),r((o=a.totalCount,{type:q,totalCount:o})),r({type:W,currentPage:e});case 8:case"end":return n.stop()}var o,i}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(he),we="INITIALIZED",Oe={initialized:!1},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(z.a)(Object(z.a)({},e),{},{initialized:!0});default:return e}},_e=n(63),Pe=n(77),ye=n(90),Ie=n(83),Se=Object(le.c)({profilePage:_e.b,dialogsPage:Pe.b,friendsPage:$,auth:k.b,form:Ie.a,app:je}),Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||le.d,Ae=Object(le.e)(Se,Ce(Object(le.a)(ye.a)));window.__store__=Ae;var xe=Ae,ke=a.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,301))})),Ne=a.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,300))})),Fe=a.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,302))})),Le=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?a.a.createElement("div",{className:"app-wrapper"},a.a.createElement(F,null),a.a.createElement(v,null),a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(se.a,null)},a.a.createElement("div",{className:"app-wrapper-content"},a.a.createElement(h.b,{path:"/profile/:userId?",render:function(){return a.a.createElement(Ne,null)}}),a.a.createElement(h.b,{path:"/dialogs",render:function(){return a.a.createElement(ke,null)}}),a.a.createElement(h.b,{path:"/friends",render:function(){return a.a.createElement(Ee,null)}}),a.a.createElement(h.b,{path:"/news",render:function(){return a.a.createElement(_,null)}}),a.a.createElement(h.b,{path:"/settings",render:function(){return a.a.createElement(I,null)}}),a.a.createElement(h.b,{path:"/login",render:function(){return a.a.createElement(Fe,null)}})))):a.a.createElement(se.a,null)}}]),n}(a.a.Component),Te=Object(le.d)(h.f,Object(x.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(){var e=Object(D.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t(Object(k.a)()),e.next=3,Promise.all([n]);case 3:t({type:"INITIALIZED"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(Le),De=function(){return a.a.createElement(g.a,null,a.a.createElement(x.a,{store:xe},a.a.createElement(Te,null)))};i.a.render(a.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m}));var r=n(4),a=n.n(r),o=n(7),i=n(2),c=n(8),u=n(49),s="SET_USER_DATA",l={userId:null,email:null,login:null,isAuth:!1},f=function(e,t,n,r){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:r}}},d=function(){return function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.authMeAPI();case 2:0===(n=e.sent).resultCode&&(r=n.data,o=r.id,i=r.email,u=r.login,t(f(o,i,u,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){var r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.loginAPI(e);case 2:0===(r=t.sent).resultCode?n(d()):(o=r.messages.length>0?r.messages[0]:"Some error",n(Object(u.a)("login",{_error:o})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(){return function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.logoutAPI();case 2:0===e.sent.resultCode&&t(f(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}}},34:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(88),i=n.n(o);t.a=function(e){return a.a.createElement("div",null,a.a.createElement("div",{className:i.a.ldsRoller},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null)))}},36:function(e,t,n){e.exports={wrapper:"Friends_wrapper__3W0RD",friendsAvatar:"Friends_friendsAvatar__13kT5",friendsName:"Friends_friendsName__Ab-KV",friendsBox:"Friends_friendsBox__1sydF"}},47:function(e,t,n){e.exports={item:"NavElement_item__36vvw",link:"NavElement_link__2uPT8",active:"NavElement_active__g5wYv"}},48:function(e,t,n){e.exports={wrapper:"News_wrapper__IPwpK",plusButton:"News_plusButton__1-t0j",minusButton:"News_minusButton__3CfcC"}},56:function(e,t,n){e.exports={nav:"Navbar_nav__1yWU9",itemWrapper:"Navbar_itemWrapper__1vpXN"}},59:function(e,t,n){e.exports={header:"Header_header__2qs1G",loginBlock:"Header_loginBlock__1R4Fa"}},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return E}));var r=n(4),a=n.n(r),o=n(7),i=n(19),c=n(2),u=n(8),s="ADD-POST",l="SET_USER_PROFILE",f="SET_STATUS",d="DELETE_POST",p={postsData:[{id:1,message:"How are you?",likesCount:3},{id:2,message:"Hi, im fine",likesCount:1}],profile:null,status:""},m=function(e){return{type:s,newPostBody:e}},g=function(e){return{type:l,profile:e}},b=function(e){return{type:f,status:e}},v=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.getProfileAPI(e);case 2:r=t.sent,n(g(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.getStatus(e);case 2:r=t.sent,n(b(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(b(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(c.a)(Object(c.a)({},e),{},{postsData:[].concat(Object(i.a)(e.postsData),[{id:7,message:t.newPostBody,likesCount:9}])});case l:return Object(c.a)(Object(c.a)({},e),{},{profile:t.profile});case f:return Object(c.a)(Object(c.a)({},e),{},{status:t.status});case d:return Object(c.a)(Object(c.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!==t.postId}))});default:return e}}},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(19),a=n(2),o="ADD-MESSAGE",i={messages:[{id:1,message:"Hi!"},{id:2,message:"Lets play some Dota!"}],dialogs:[{id:1,name:"Lex",avatar:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRKDM99rvtftg7ZHF5_cfcYMIddC35KSuaJ8Q&usqp=CAU"},{id:2,name:"Lost",avatar:"https://svirtus.cdnvideo.ru/5BwwcdCMwq3EQKgjMP-3rOqooBg=/0x0:209x204/800x0/filters:quality(100)/https://hb.bizmrg.com/cybersportru-media/35/354cfce6f19b2bc856220f4c5f13b3c2.jpg?m=d668102fd143f399db9880ce43f8a1ae"},{id:3,name:"Smile",avatar:"https://svirtus.cdnvideo.ru/T2Rx94j-A62VChGWYun076lAK98=/0x0:250x250/800x0/filters:quality(100)/https://hb.bizmrg.com/cybersportru-media/73/735bd29e228660f8d7084f56351019be.jpg?m=693b8e5540cbd57774380aef7b191044"}]},c=function(e){return{type:o,newMessageBody:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n=t.newMessageBody;return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:9,message:n}])});default:return e}}},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(86),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"c3b6b8c4-0dfb-4a27-8050-5e4ce867a46f"}}),o={getUsersAPI:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollowUserAPI:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))},followUserAPI:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data}))}},i={getProfileAPI:function(e){return a.get("profile/".concat(e))},getStatus:function(e){return a.get("profile/status/".concat(e))},updateStatus:function(e){return a.put("profile/status",{status:e})}},c={authMeAPI:function(){return a.get("auth/me").then((function(e){return e.data}))},loginAPI:function(e){return a.post("auth/login",{email:e.login,password:e.password,rememberMe:e.rememberMe,captcha:!0}).then((function(e){return e.data}))},logoutAPI:function(){return a.post("auth/logout").then((function(e){return e.data}))}}},84:function(e,t,n){e.exports={wrapper:"Settings_wrapper__2FOUJ"}},87:function(e,t,n){e.exports={selectedPage:"Paginators_selectedPage__VVmzE"}},88:function(e,t,n){e.exports={ldsRoller:"Loader_ldsRoller__ZjnZX"}}},[[230,2,3]]]);
//# sourceMappingURL=main.00fe4f36.chunk.js.map